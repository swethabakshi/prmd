{
  "id": "schemata/event",
  "title": "Event",
  "description": "An event represents a change in billing, service or product state/configuration for a customer account.",
  "entity": "event",
  "definitions": {
      "id": {
          "description": "unique identifier for the event",
          "example": "01234567-89ab-cdef-0123-456789abcdef",
          "format": "uuid",
          "readOnly": true,
          "type": "string"
      },
      "event_type": {
          "description": "the type of event",
          "example": "financial",
          "readOnly": true,
          "type": "string",
          "enum": [
              "financial",
              "audit",
              "usage"
          ]
      },
      "amount_cents": {
          "description": "amount of the charge in cents",
          "example": "2990",
          "readOnly": true,
          "type": "integer"
      },
      "amount_currency": {
          "description": "alpha3 code for the currency of the amount",
          "example": "AUD",
          "type": "string",
          "readOnly": true,
          "enum": [
              "AUD",
              "USD"
          ]
      },
      "label": {
          "description": "label for the event",
          "example": "monthly subscription for 5 users",
          "readOnly": true,
          "type": "string"
      },
      "tx_type": {
          "description": "the type financial transaction",
          "example": "charge",
          "readOnly": true,
          "type": "string",
          "enum": [
              "charge",
              "refund"
          ]
      },
      "organization_id": {
          "description": "the id of the organization related to the event",
          "example": "org-1f2d6",
          "type": "string",
          "readOnly": true
      },
      "product_instance_type": {
          "description": "the name of the product instance related to this event",
          "example": "virtual_machine",
          "type": "string",
          "readOnly": true
      },
      "product_instance_id": {
          "description": "the id of the product instance related to the event",
          "example": "1f2fds31f4f7g4",
          "type": "string",
          "readOnly": true
      }
  },
  "properties": {
      "id": {
          "$ref": "/schemata/event#/definitions/id"
      },
      "event_type": {
          "$ref": "/schemata/event#/definitions/event_type"
      },
      "amount_cents": {
          "$ref": "/schemata/event#/definitions/amount_cents"
      },
      "amount_currency": {
          "$ref": "/schemata/event#/definitions/amount_currency"
      },
      "tx_type": {
          "$ref": "/schemata/event#/definitions/tx_type"
      },
      "label": {
          "$ref": "/schemata/event#/definitions/label"
      },
      "organization_id": {
          "$ref": "/schemata/event#/definitions/organization_id"
      },
      "product_instance_type": {
          "$ref": "/schemata/event#/definitions/product_instance_type"
      },
      "product_instance_id": {
          "$ref": "/schemata/event#/definitions/product_instance_id"
      }
  },
  "dependencies": {
      "amount_cents": {
          "properties": {
              "event_type": { 
                  "enum": ["financial"]
              }
          }
      },
      "amount_currency": {
          "properties": {
              "event_type": { 
                  "enum": ["financial"]
              }
          }
      },
      "tx_type": {
          "properties": {
              "event_type": { 
                  "enum": ["financial"] 
              }
          }
      }
  },
  "links": [
        {
            "title": "Info",
            "description": "Info for an existing event",
            "href": "/events/{(%2Fschemata%2Fevent%23%2Fdefinitions%2Fid)}",
            "method": "GET",
            "rel": "self"
        },
        {
            "title": "List",
            "description": "List all events",
            "href": "/events",
            "method": "GET",
            "rel": "instances"
        }<% if parent %>,
        {
            "title": "List",
            "description": "List <%= parent %> events",
            "href": "/<%= parent %>s/{(%2Fschemata%2F<%= parent %>%23%2Fdefinitions%2Fid)}/events",
            "method": "GET",
            "rel": "instances"
        }<% end %>
    ]
}